<template>
    <lightning-card title="Search By">
        <div class="slds-card__body slds-card__body_inner">
            <lightning-layout>
                <lightning-layout-item size="3" padding="around-small">
                    <lightning-input type="text" placeholder="Enter Last Name" variant="standard" name="lastName" value={lastName} label="Last Name"
                        onchange={handleInputChange}></lightning-input>
                </lightning-layout-item>
                <lightning-layout-item size="3" padding="around-small">
                    <lightning-input type="text" placeholder="Enter First Name" variant="standard" name="firstName" value={firstName} label="First Name"
                        onchange={handleInputChange}></lightning-input>
                </lightning-layout-item>
                <lightning-layout-item size="3" padding="around-small">
                    <lightning-input type="text" placeholder="Enter City/Town" variant="standard" name="" 
                        label="City/Town" onchange={handleInputChange}></lightning-input>
                </lightning-layout-item>
                <lightning-layout-item size="3" padding="around-small">
                    <lightning-input type="text" placeholder="Enter Proposed Use" variant="standard" name="" 
                        label="Proposed Use" onchange={handleInputChange}></lightning-input>
                </lightning-layout-item>
            </lightning-layout>

            <lightning-layout multiple-rows>
                <lightning-layout-item size="3" padding="around-small">
                    <lightning-input type="text" placeholder="Enter Letter Text" variant="standard" name="email"  label="Letter Text"
                        onchange={handleInputChange}></lightning-input>
                </lightning-layout-item>
                <lightning-layout-item size="3" padding="around-small">
                    <lightning-input type="text" placeholder="Enter Disposition" variant="standard" name="email"  label="Disposition"
                        onchange={handleInputChange}></lightning-input>
                </lightning-layout-item>
                <lightning-layout-item size="3" padding="around-small">
                    <lightning-input type="text" placeholder="Enter Approved For" variant="standard" name="email"  label="Approved For"
                        onchange={handleInputChange}></lightning-input>
                </lightning-layout-item>
                <lightning-layout-item size="3" padding="around-small">
                    <lightning-input type="text" placeholder="Enter Entity" variant="standard" name="email"  label="Entity"
                        onchange={handleInputChange}></lightning-input>
                </lightning-layout-item>
            </lightning-layout>

            <lightning-layout multiple-rows>
                <lightning-layout-item size="3" padding="around-small">
                    <lightning-input type="date" placeholder="Enter Last Name" variant="standard" name="email"  label="Response Date"
                        onchange={handleInputChange}></lightning-input>
                </lightning-layout-item>
                <lightning-layout-item size="3" padding="around-small">
                    <lightning-input type="date" placeholder="Enter Last Name" variant="standard" name="email"  label="Response Date"
                        onchange={handleInputChange}></lightning-input>
                </lightning-layout-item>
            </lightning-layout>

            <lightning-layout-item size="12" padding="around-small">
                <div style="display: flex; justify-content: flex-end;">
                    <lightning-button variant="neutral" label="Clear All" onclick={handleClear}></lightning-button>
                    <lightning-button variant="brand" label="Search" onclick={fetchRecords} style="margin-left: 10px;"></lightning-button>
                </div>
            </lightning-layout-item>
   
        </div>
    </lightning-card>

    <lightning-card>
        <div class="slds-grid slds-grid_align-end slds-m-bottom_medium" style="margin-right: 10px">
            <div class="button-container">
                <div class="left-button slds-p-left_small">
                    <span class="slds-text-title_bold slds-m-right_x-small">Search :</span>
                    <lightning-badge label={transactionsFoundLabel} class="slds-badge_inverse">
                    </lightning-badge>
                </div>
                <div class="right-buttons">
                    <lightning-badge data-id="current-day" label="Current day" class={badgeClassCurrentDay}
                        onclick={handleBadgeClick}>
                    </lightning-badge>
                    <lightning-badge data-id="this-week" label="This week" class={badgeClassThisWeek}
                        onclick={handleBadgeClick}>
                    </lightning-badge>
                    <lightning-badge data-id="this-month" label="This month" class={badgeClassThisMonth}
                        onclick={handleBadgeClick}>
                    </lightning-badge>
                    <lightning-badge data-id="this-quarter" label="This quarter" class={badgeClassThisQuarter}
                        onclick={handleBadgeClick}>
                    </lightning-badge>
                    <lightning-badge data-id="this-year" label="This year" class={badgeClassThisYear}
                        onclick={handleBadgeClick}>
                    </lightning-badge>

                    <lightning-button variant="brand" label="Add New" title="Primary action" onclick={handleAddNew}
                        class="slds-m-left_x-small"></lightning-button>
                    <template if:true={openFlow}>
                        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open slds-modal_large">
                            <div class="slds-modal__container custom-modal-container slds-modal_large">
                                <!-- Modal/Popup Header -->
                                <header class="slds-modal__header">
                                    <button
                                        class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                                        title="Close" onclick={closeModal}>
                                        <lightning-icon class="custom-close-icon" icon-name="utility:close"
                                            alternative-text="close" size="small"></lightning-icon>
                                        <span class="slds-assistive-text">Close</span>
                                    </button>
                                    <h2 class="slds-text-heading_medium">Order Intake</h2>
                                </header>
                                <!-- Modal/Popup Body -->
                                <div class="slds-modal__content slds-p-around_medium ">
                                    <lightning-flow flow-api-name="Add_Request_Screen_FLow"></lightning-flow>
                                </div>

                                <!-- Modal/Popup Footer -->
                                <footer class="slds-modal__footer">
                                    <lightning-button variant="neutral" label="Close"
                                        onclick={closeModal}></lightning-button>
                                </footer>
                            </div>
                        </section>
                        <div class="slds-backdrop slds-backdrop_open"></div>
                    </template>
                    <!-- <lightning-button-menu icon-position="right" data-id="filterMenu"
                        alternative-text="Filter By SStatus" label="Filter By Status" title="Filter"
                        tooltip="Filter by status" icon-name="utility:filterList" onselect={handleFilterSelect}>

                            <lightning-flow flow-api-name='Add_Request_Screen_FLow' flow-input-variables={inputVariables}
                            onstatuschange={handleStatusChange}>
                            </lightning-flow>
                            
                        <lightning-menu-item label="Approved" value="approved"></lightning-menu-item>
                        <lightning-menu-item label="In progress" value="in-progress"></lightning-menu-item>
                        <lightning-menu-item label="Rejected" value="rejected"></lightning-menu-item>
                    </lightning-button-menu> -->

                    <!-- <span class="slds-text-body_regular slds-m-right_small custom-label" onclick={handleFilterClick}>Filter by Status</span>   -->
                    <!-- <span class="slds-text-body_regular slds-m-right_small custom-label" onclick={handleFilterClick}> -->
                </div>
            </div>
        </div>
        <lightning-datatable key-field="Work_Order_Number__c" data={dataList} columns={columnList}
            onrowaction={handleRowAction} hide-checkbox-column>
        </lightning-datatable>

        <div class="pagination-container">
            <!-- Left arrow button -->
            <lightning-button class="pagination-button" label="<< Prev" onclick={handlePrevious}
                disabled={disableLeftArrow} variant="neutral">
            </lightning-button>

            <!-- Page range and total pages -->
            <div class="page-info">
                <span class="page-range">{currentPage}-{transactionsFoundLabel} of
                    {transactionsFoundLabel}</span>
                <span class="page-text"> | Page {currentPage} of {totalPages}</span>
            </div>

            <!-- Right arrow button -->
            <lightning-button class="pagination-button" label="Next >>" onclick={handleNext}
                disabled={disableRightArrow} variant="neutral">
            </lightning-button>
        </div>
    </lightning-card>
</template>