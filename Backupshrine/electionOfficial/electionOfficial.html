<template>
    <article class="slds-card">
        <div class="slds-card__header slds-grid slds-page-header">
            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                <div class="slds-media__figure">
                    <span class="slds-icon_container slds-icon-utility-search slds-text-heading_small" title="Search">
                        <lightning-icon icon-name="standard:search" alternative-text="Search"
                            title="Search"></lightning-icon>
                    </span>
                </div>
                <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                        <span class="slds-truncate" title="Search"
                            style="margin-left: -5px; font-size: 1rem; color: #0070d2">Search</span>
                    </h2>
                </div>
            </header>
        </div>
        <div class="slds-card__body slds-card__body_inner">
            <lightning-layout>
                <lightning-layout-item flexibility="auto" padding="around-small">
                    <lightning-input type="number" variant="standard" name="applicationNo" value={applicationNo}
                        label="ID" onchange={handleInputChange}></lightning-input>
                </lightning-layout-item>
                <lightning-layout-item flexibility="auto" padding="around-small">
                    <lightning-input type="text" variant="standard" name="lastName" value={lastName} label="Election Office by"
                        onchange={handleInputChange}></lightning-input>
                </lightning-layout-item>
                <lightning-layout-item flexibility="auto" padding="around-small">
                    <lightning-input type="text" variant="standard" name="firstName" value={firstName}
                        label="Election Office" onchange={handleInputChange}></lightning-input>
                </lightning-layout-item>
                <lightning-layout-item flexibility="auto" padding="around-small">
                    <lightning-input type="text" variant="standard" name="organisationName" value={organisationName}
                        label="Election held in" onchange={handleInputChange}></lightning-input>
                </lightning-layout-item>
                <lightning-layout-item flexibility="auto" padding="around-small">
                    <lightning-input type="text" variant="standard" name="email" value={email} label="Congressional Districts"
                        onchange={handleInputChange}></lightning-input>
                </lightning-layout-item>
            </lightning-layout>

            <lightning-layout style="width: 80%" multiple-rows>
                <lightning-layout-item size="2.5" padding="around-small">
                    <lightning-input type="number" variant="standard" name="status" value={status} label="Home Assembly Districts"
                        onchange={handleInputChange}></lightning-input>
                </lightning-layout-item>
                <lightning-layout-item size="2.5" padding="around-small">
                    <lightning-input type="picklist" variant="standard" name="expedite" value={expedite}
                        label="Senatorial Districts" onchange={handleInputChange}></lightning-input>
                </lightning-layout-item>
            </lightning-layout>

            <lightning-layout-item size="12" padding="around-small">
                <div style="
            margin-right: 10px;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
          ">
                    <lightning-button icon-name="utility:clear" variant="base" alternative-text="Clear All"
                        label="Clear All" onclick={handleClear}>
                    </lightning-button>

                    <lightning-button icon-name="utility:search" variant="brand" alternative-text="Search"
                        label="Search" class="searchbg" onclick={fetchRecords}>
                    </lightning-button>
                </div>
            </lightning-layout-item>
        </div>
    </article>

    <lightning-card>
        <div class="slds-grid slds-grid_align-end slds-m-bottom_medium" style="margin-right: 10px">
            <div class="button-container">
                <div class="left-button slds-p-left_small">
                    <span class="slds-text-title_bold slds-m-right_x-small">Search Results(Election Office by Town)</span>
                    <lightning-badge label={transactionsFoundLabel} class="slds-badge_inverse">
                    </lightning-badge>
                </div>
                <div class="right-buttons">
                    <lightning-badge data-id="current-day" label="Today" class={badgeClassCurrentDay}
                        onclick={handleBadgeClick}>
                    </lightning-badge>
                    <lightning-badge data-id="this-week" label="This week" class={badgeClassThisWeek}
                        onclick={handleBadgeClick}>
                    </lightning-badge>
                    <lightning-badge data-id="this-month" label="This month" class={badgeClassThisMonth}
                        onclick={handleBadgeClick}>
                    </lightning-badge>
                    <lightning-badge data-id="this-quarter" label="This quarter" class={badgeClassThisQuarter}
                        onclick={handleBadgeClick}>
                    </lightning-badge>
                    <lightning-badge data-id="this-year" label="This year" class={badgeClassThisYear}
                        onclick={handleBadgeClick}>
                    </lightning-badge>

                    <!-- <lightning-button icon-name="utility:add" variant="brand" alternative-text="Add New Offical"
                     label="Add New Official" title="Primary action" onclick={handleAddNew}
                        class="slds-m-left_x-small searchbg"></lightning-button> -->
                    <template if:true={openFlow}>
                        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open slds-modal_large">
                            <div class="slds-modal__container custom-modal-container slds-modal_large">
                                <!-- Modal/Popup Header -->
                                <header class="slds-modal__header">
                                    <button
                                        class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                                        title="Close" onclick={closeModal}>
                                        <lightning-icon class="custom-close-icon" icon-name="utility:close"
                                            alternative-text="close" size="small"></lightning-icon>
                                        <span class="slds-assistive-text">Close</span>
                                    </button>
                                    <h2 class="slds-text-heading_medium">Order Intake</h2>
                                </header>
                                <!-- Modal/Popup Body -->
                                <div class="slds-modal__content slds-p-around_medium ">
                                    <lightning-flow flow-api-name="Add_Request_Screen_FLow"></lightning-flow>
                                </div>

                                <!-- Modal/Popup Footer -->
                                <footer class="slds-modal__footer">
                                    <lightning-button variant="neutral" label="Close"
                                        onclick={closeModal}></lightning-button>
                                </footer>
                            </div>
                        </section>
                        <div class="slds-backdrop slds-backdrop_open"></div>
                    </template>
                    <!-- <lightning-button-menu icon-position="right" data-id="filterMenu"
                        alternative-text="Filter By SStatus" label="Filter By Status" title="Filter"
                        tooltip="Filter by status" icon-name="utility:filterList" onselect={handleFilterSelect}>
     
                            <lightning-flow flow-api-name='Add_Request_Screen_FLow' flow-input-variables={inputVariables}
                            onstatuschange={handleStatusChange}>
                            </lightning-flow>
                        
                        <lightning-menu-item label="Approved" value="approved"></lightning-menu-item>
                        <lightning-menu-item label="In progress" value="in-progress"></lightning-menu-item>
                        <lightning-menu-item label="Rejected" value="rejected"></lightning-menu-item>
                    </lightning-button-menu> -->

                    <!-- <span class="slds-text-body_regular slds-m-right_small custom-label" onclick={handleFilterClick}>Filter by Status</span>   -->
                    <!-- <span class="slds-text-body_regular slds-m-right_small custom-label" onclick={handleFilterClick}> -->
                </div>
            </div>
        </div>
        <lightning-datatable key-field="Work_Order_Number__c" data={dataList} columns={columnList}
            onrowaction={handleRowAction} hide-checkbox-column>
        </lightning-datatable>

        <div class="pagination-container">
            <!-- Left arrow button -->
            <lightning-button class="pagination-button" label="<< Prev" onclick={handlePrevious}
                disabled={disableLeftArrow} variant="neutral">
            </lightning-button>

            <!-- Page range and total pages -->
            <div class="page-info">
                <span class="page-range">{currentPage}-{transactionsFoundLabel} of
                    {transactionsFoundLabel}</span>
                <span class="page-text"> | Page {currentPage} of {totalPages}</span>
            </div>

            <!-- Right arrow button -->
            <lightning-button class="pagination-button" label="Next >>" onclick={handleNext}
                disabled={disableRightArrow} variant="neutral">
            </lightning-button>
        </div>
    </lightning-card>
</template>