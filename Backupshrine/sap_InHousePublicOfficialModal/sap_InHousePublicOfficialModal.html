<template>
    <template if:true={isLoading}>
        <div class="spinner-container">
            <lightning-spinner alternative-text="Loading..." variant="brand" size="large"></lightning-spinner>
        </div>
    </template>
    <template if:false={isLoading}>
        <div class="SE-ModalHeaderMain">
            <div>
                <lightning-button-icon icon-name="utility:back" size="large" alternative-text="go Back"
                    onclick={cloeModels} class="custom-modal__back">
                </lightning-button-icon>
                <div class="SE-ModalHeaderTitle" style="margin-left: 40px;">
                    <h2>{headerText}</h2>
                </div>
            </div>
            <div>
                <template if:true={isReadOnly}>
                    <lightning-button icon-name="utility:edit" alternative-text="Edit" class="edit-button"
                        onclick={handleEditClick} title="Edit" variant="base" aria-label="Edit"
                        label="Edit"></lightning-button>
                </template>
            </div>
        </div>
        <div class="SE-ModalHeader">
            <div class="SE-modalMainBody modalBodyCssChange">
                <div class="SE-modalFormStack modifyheight">
                    <div class="SE-modalFormStackSection Component1">
                        <div class="SE-modalFormStackSectionHeader">
                            <div class="SE-modalFormStackSectionHeaderIcon">
                                <lightning-icon icon-name="standard:user" size="medium"></lightning-icon>
                            </div>
                            <div class="slds-media__body SE-modalFormStackSectionHeaderTitle">
                                <h2 class="slds-text-heading_small">Basic Info</h2>
                                <p class="slds-text-body_small">Enter name and position detail of the person to be added
                                    as
                                    official</p>
                            </div>
                        </div>

                        <div class="SE-modalFormStackSectionContent">
                            <div class="slds-grid SE-modalFormStackSectionInputRow">

                                <div class="slds-col SE-customCol">
                                    <label class="SE-inputLabel" for="lastName"><span
                                            class="required-indicator">*</span>Last
                                        Name</label>
                                    <div class={lastNameErrorClass}>
                                        <lightning-input pattern="[A-Za-z]+" message-when-pattern-mismatch="Last name should only contain letters." 
                                        label="Last Name" class="SE-searchCardInputLabel" name="lastName" variant="label-hidden"
                                            id="lastName" placeholder="e.g Doe" value={lastName} required
                                            disabled={isReadOnly} aria-describedby="lastNameError"
                                            aria-invalid={isLastNameInvalid} onchange={handlelastnameChange}>
                                        </lightning-input>
                                    </div>
                                    <template if:true={isLastNameInvalid}>
                                        <div>
                                            Last Name is required.
                                        </div>
                                    </template>
                                </div>
                                <div class="slds-col SE-customCol">
                                    <label class="SE-inputLabel" for="middleInitial"><span
                                            class="required-indicator"></span>Middle Initial</label>
                                    <lightning-input label="Middle Initial" name="middleInitial" variant="label-hidden"
                                        id="middleInitial" placeholder="e.g R" value={middleInitial} 
                                        disabled={isReadOnly} onchange={handlemiddleChange}>
                                    </lightning-input>
                                </div>
                                <div class="slds-col SE-customCol">
                                    <label class="SE-inputLabel" for="firstName"><span
                                            class="required-indicator">*</span>First
                                        Name</label>
                                    <div class={firstNameErrorClass}>
                                        <lightning-input label="First Name" name="firstName" variant="label-hidden"
                                            id="firstName" class="SE-searchCardInputLabel" placeholder="e.g John" value={firstName} required
                                            aria-describedby="firstNameError" disabled={isReadOnly}
                                            aria-invalid={isFirstNameInvalid} pattern="[A-Za-z]+" message-when-pattern-mismatch="First name should only contain letters." 
                                            onchange={handlefirstChange} >
                                        </lightning-input>
                                    </div>
                                    <template if:true={isFirstNameInvalid}>
                                        <div>
                                            First Name is required.
                                        </div>
                                    </template>
                                </div>
                                <div class="slds-col SE-customCol">
                                    <label class="SE-inputLabel" for="Position">Position</label>
                                    <lightning-combobox label="Position" name="Position" variant="label-hidden"
                                        id="Position" value={position} disabled={isReadOnly} options={positionOptions}
                                        onchange={handlePositionChange} placeholder="Select Position">
                                    </lightning-combobox>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="SE-modalFormStackSection Component2">
                        <div class="SE-modalFormStackSectionHeader">
                            <div class="SE-modalFormStackSectionHeaderIcon">
                                <lightning-icon icon-name="standard:date_time" size="medium"></lightning-icon>
                            </div>
                            <div class="slds-media__body SE-modalFormStackSectionHeaderTitle">
                                <h2 class="slds-text-heading_small">Term Details</h2>
                                <p class="slds-text-body_small">Enter term details to continue further.</p>
                            </div>
                        </div>

                        <div class="SE-modalFormStackSectionContent">
                            <div class="slds-grid SE-modalFormStackSectionInputRow">

                                <div class="slds-col SE-customCol termDetails">
                                    <label class="SE-inputLabel" for="TermStartDate"><span
                                            class="required-indicator">*</span>Start of Most Recent Term</label>
                                    <div class={termstartErrorClass}>
                                        <lightning-input class="SE-searchCardInputLabel" label="Term Start Date" name="Term Start Date"
                                            variant="label-hidden" id="termstartDate" type="Date"
                                            placeholder="mm/dd/yyyy" value={termstartDate} required date-style="short"
                                            disabled={disabledTerms} aria-invalid={istermstartInvalid}
                                            onchange={handletermstartChange}>
                                        </lightning-input>
                                    </div>
                                    <template if:true={istermstartInvalid}>
                                        <div>
                                            Term Start Date is required.
                                        </div>
                                    </template>
                                  
                                </div>
                                <div class="slds-col SE-customCol termDetails">
                                    <label class="SE-inputLabel" for="state"><span
                                            class="required-indicator">*</span>End of
                                        Most Recent Term</label>
                                    <div class={termendErrorClass}>
                                        <lightning-input class="SE-searchCardInputLabel" label="Term End Date" name="Term End Date"
                                            variant="label-hidden" id="termendDate" type="Date" placeholder="mm/dd/yyyy"
                                            value={termendDate} required date-style="short" disabled={disabledTerms}
                                            aria-invalid={istermendInvalid} onchange={handletermendChange}>
                                        </lightning-input>
                                    </div>
                                    <template if:true={istermendInvalid}>
                                        <div>
                                            Term End Date is required.
                                        </div>
                                    </template>
                                    <template if:true={isEndDateEarlier}>
                                        <div class="errorText">Term End Date cannot be earlier than the Term Start Date.</div>
                                    </template>
                                </div>
                                <div class="slds-col SE-customCol">
                                    <lightning-input label="Indefinite Term" name="Indefinite Term" id="IndefiniteTerm"
                                        value={isIndefiniteTerm} checked={isIndefiniteTerm} type="checkbox"
                                        class="indefinitetermalignment SE-searchCardInputLabel" disabled={isReadOnly}
                                        onchange={handleIndefiniteTermChange} >
                                    </lightning-input>
                                </div>
                            </div>


                            <div class="slds-grid SE-modalFormStackSectionInputRow">
                                <div class="slds-col SE-customCol termDetails">
                                    <label class="SE-inputLabel" for="Town">Town</label>
                                    <lightning-combobox label="Town" name="Town" variant="label-hidden" id="Town"
                                        value={Town} disabled={isReadOnly} options={townOption}
                                        onchange={handleTownOption} placeholder="Select town of ">
                                    </lightning-combobox>
                                </div>
                                <div class="slds-col SE-customCol termDetails">
                                    <label class="SE-inputLabel" for="JudicialDistrict">Judicial District</label>
                                    <lightning-combobox label="Judicial District" name="Judicial District"
                                        variant="label-hidden" id="JudicialDistrict"
                                        placeholder="Select judicial district" value={judicialDistrict}
                                        disabled={isReadOnly} options={judicialSelectOptions}
                                        onchange={handlejudicialChange}>
                                    </lightning-combobox>
                                </div>
                            </div>

                            <div class="slds-grid SE-modalFormStackSectionInputRow">
                                <div class="slds-col SE-customCol75">
                                    <label class="SE-inputLabel" for="Seal/Stampof">Seal/Stamp of</label>
                                    <lightning-textarea name="Seal/Stamp of" label="Seal/Stamp of"
                                        variant="label-hidden" id="SealStampof" placeholder="Enter seal/stamp of..."
                                        value={SealStampof} disabled={isReadOnly} onchange={handlesealstateChange}>
                                    </lightning-textarea>
                                </div>
                                <div class="slds-col SE-customCol75">
                                    <label class="SE-inputLabel" for="Notes">Notes</label>
                                    <lightning-textarea name="Notes" label="Notes" variant="label-hidden" id="Notes"
                                        placeholder="Enter notes..." value={Notes} disabled={isReadOnly}
                                        onchange={handlenoteChange}>
                                    </lightning-textarea>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div class="flex-container Component3">
                        <div class="flex-item">
                            <div class="SE-modalFormStackSection">

                                <div class="SE-modalFormStackSectionHeader">
                                    <div class="SE-modalFormStackSectionHeaderIcon">
                                        <lightning-icon icon-name="standard:app_form_product_participant"
                                            size="medium"></lightning-icon>
                                    </div>
                                    <div class="slds-media__body SE-modalFormStackSectionHeaderTitle">
                                        <h2 class="slds-text-heading_small">Term History</h2>
                                        <p class="slds-text-body_small">Below is the term history of the official.</p>
                                    </div>
                                </div>

                                <div class="SE-modalFormStackSectionContent">
                                    <table class="slds-table slds-table_cell-buffer slds-table_bordered custom-table">
                                        <thead>
                                            <tr class="custom-header">
                                                <th scope="col">
                                                    <div class="slds-truncate">Start Term</div>
                                                </th>
                                                <th scope="col">
                                                    <div class="slds-truncate">End Term</div>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <template for:each={displayTermHistoryRecords} for:item="record">
                                                <tr key={record.changeDate} class="custom-column">
                                                    <td>
                                                        <div class={record.startTermClass}>{record.startTerm}</div>
                                                    </td>
                                                    <td>
                                                        <div class={record.endTermClass}>{record.endTerm}</div>
                                                    </td>

                                                </tr>
                                            </template>
                                        </tbody>
                                    </table>
                                </div>

                            </div>
                        </div>
                        <div class="flex-item">
                            <div class="SE-modalFormStackSection">

                                <div class="SE-modalFormStackSectionHeader">
                                    <div class="SE-modalFormStackSectionHeaderIcon">
                                        <lightning-icon icon-name="standard:person_name" size="medium"></lightning-icon>
                                    </div>
                                    <div class="slds-media__body SE-modalFormStackSectionHeaderTitle">
                                        <h2 class="slds-text-heading_small">Name History</h2>
                                        <p class="slds-text-body_small">Below is the name history of the official.</p>
                                    </div>
                                </div>

                                <div class="SE-modalFormStackSectionContent">
                                    <table class="slds-table slds-table_cell-buffer slds-table_bordered custom-table">
                                        <thead>
                                            <tr class="custom-header">
                                                <th scope="col">
                                                    <div class="slds-truncate">First Name</div>
                                                </th>
                                                <th scope="col">
                                                    <div class="slds-truncate">Middle Name</div>
                                                </th>
                                                <th scope="col">
                                                    <div class="slds-truncate">Last Name</div>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <template for:each={displayHistoryRecords} for:item="record">
                                                <tr key={record.changeDate} class="custom-column">
                                                    <td>
                                                        <div class="slds-truncate spacing">{record.firstName}</div>
                                                    </td>
                                                    <td>
                                                        <div class="slds-truncate spacing">{record.middleName}</div>
                                                    </td>
                                                    <td>
                                                        <div class="slds-truncate spacing">{record.lastName}</div>
                                                    </td>
                                                </tr>
                                            </template>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="footer">
            <div class="SE-modalFooter">
                <div class='slds-button-group'>
                    <div class="button-right-group SE-modalFooterButtonGroup">
                        <template if:true={isReadOnly}>
                            <button class="slds-button SE-borderLessButton" onclick={cloeModels}>Cancel</button>
                        </template>

                        <template if:false={isReadOnly}>
                            <button class="slds-button SE-borderLessButton" onclick={cloeModels}>Cancel</button>
                            <lightning-button variant="brand" label={footerText} class="save-button"
                                onclick={handleAdd}></lightning-button>
                        </template>
                    </div>
                </div>
            </div>
        </div>
        <c-sap_-toast-message-state-modal></c-sap_-toast-message-state-modal>

    </template>


</template>