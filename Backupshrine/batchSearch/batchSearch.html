<template>

    <lightning-card>
        <div class="header">
            <h1>Batch</h1>
        </div>

    <div  class="lineClass">

    <lightning-card>
        <div class="batch-section slds-box slds-theme_default">
            <div class="batch-header">
                <h2>Batch</h2>
            </div>
        <div class="slds-grid slds-wrap">
            <!-- Form Rows -->
            <div class="slds-col slds-size_1-of-1 slds-large-size_1-of-7">
                <div class="slds-form-element">
                    <div class="slds-form-element__control">
                        <lightning-combobox
                            label="Select Batch Code"
                            id="batchCode"
                            name="batchCode"
                            value={batchCode}
                            options={batchCodeOptions}
                            onchange={handleBatchCodeChange}>
                        </lightning-combobox>
                    </div>
                </div>
            </div>

            <div class="slds-col slds-size_1-of-1 slds-large-size_1-of-7">
                <div class="slds-form-element">
                    <div class="slds-form-element__control">
                        <lightning-input
                            label="Batch Start Date"
                            type="date"
                            value={batchDate}
                            onchange={handleBatchDateChange}>
                        </lightning-input>
                    </div>
                </div>
            </div>

            <div class="slds-col slds-size_1-of-1 slds-large-size_1-of-7">
                <div class="slds-form-element">
                    <div class="slds-form-element__control">
                        <lightning-input
                            label="Batch End Date"
                            type="date"
                            value={batchEndDate}
                            onchange={handleBatchEndDateChange}>
                        </lightning-input>
                    </div>
                </div>
            </div>

            <div class="slds-col slds-size_1-of-1 slds-large-size_1-of-7">
                <div class="slds-form-element">
                    <div class="slds-form-element__control">
                        <lightning-combobox
                            label="Transaction Amount"
                            id="transactionAmount"
                            name="transactionAmount"
                            value={transactionAmount}
                            options={transactionAmountOptions}
                            onchange={handleTransactionAmountChange}>
                        </lightning-combobox>
                    </div>
                </div>
            </div>

            <div class="slds-col slds-size_1-of-1 slds-large-size_1-of-7">
                <div class="slds-form-element">
                    <div class="slds-form-element__control">
                        <lightning-combobox
                            label="Transaction Count"
                            id="transactionCount"
                            name="transactionCount"
                            value={transactionCount}
                            options={transactionCountOptions}
                            onchange={handleTransactionCountChange}>
                        </lightning-combobox>
                    </div>
                </div>
            </div>
        </div>

        <!-- Button Container -->
        <div class="slds-grid slds-grid_align-end slds-m-top_medium">
            <div class="slds-col slds-size_auto slds-p-around_small">
                <lightning-button
                    label="Clear all"
                    onclick={handleClear}
                    class="slds-m-right_small">
                </lightning-button>
                <lightning-button
                    label="Search"
                    onclick={handleSearch}
                    variant="brand">
                </lightning-button>
            </div>
        </div>
        </div>
    </lightning-card>
</div>
</lightning-card>

<div class="lineClass">
    <lightning-card>
        <!-- Filter Section -->
        <div class="filter-section">
        <div class="slds-grid slds-grid_align-end slds-m-bottom_medium">
            <div class="button-container">
                <div class="left-button">
                    <span class="slds-text-title_bold slds-m-right_x-small transactionHeader">Transactions:</span>
                    <lightning-badge
                        label={transactionsFoundLabel}
                        class="slds-badge_inverse">
                    </lightning-badge>
                </div>
                <div class="right-buttons">
                    <lightning-badge
                        data-id="current-day"
                        label="Current day"
                        class={badgeClassCurrentDay}
                        onclick={handleBadgeClick}>
                    </lightning-badge>
                    <lightning-badge
                        data-id="this-week"
                        label="This week"
                        class={badgeClassThisWeek}
                        onclick={handleBadgeClick}>
                    </lightning-badge>
                    <lightning-badge
                        data-id="this-month"
                        label="This month"
                        class={badgeClassThisMonth}
                        onclick={handleBadgeClick}>
                    </lightning-badge>
                    <lightning-badge
                        data-id="this-quarter"
                        label="This quarter"
                        class={badgeClassThisQuarter}
                        onclick={handleBadgeClick}>
                    </lightning-badge>
                    <lightning-badge
                        data-id="this-year"
                        label="This year"
                        class={badgeClassThisYear}
                        onclick={handleBadgeClick}>
                    </lightning-badge>

                    <lightning-button-menu
        icon-position="right"
        data-id="filterMenu"
        alternative-text="Filter By Status"
        title="Filter"
        tooltip="Filter by Status"
        icon-name="utility:filterList"
        onselect={handleFilterSelect}
        class="slds-button_icon slds-button_icon-inverse custom-button-menu">
        <lightning-menu-item label="Open" value="Open"></lightning-menu-item>
        <lightning-menu-item label="Closed" value="Closed"></lightning-menu-item>
        <lightning-menu-item label="Sealed" value="Sealed"></lightning-menu-item>
        <lightning-menu-item label="Unseal" value="Unseal"></lightning-menu-item>
        <lightning-menu-item label="All" value="All"></lightning-menu-item>
    </lightning-button-menu>
    <span class="slds-text-body_regular slds-m-right_small custom-label" onclick={handleFilterClick}>Filter by Status</span>
    <!-- Additional Button (space reserved) -->
<!-- 
                    <lightning-button-menu
                        icon-position="right"
                        data-id="filterMenuTime"
                        alternative-text="Filter By Time Period"
                        title="Filter"
                        tooltip="Filter by Time "
                        icon-name="utility:filterList"
                        onselect={handleFilterSelect}
                        class="slds-button_icon slds-button_icon-inverse custom-button-menu">
                        <lightning-menu-item label="Today" value="Today"></lightning-menu-item>
                        <lightning-menu-item label="This Week" value="ThisWeek"></lightning-menu-item>
                        <lightning-menu-item label="This Month" value="ThisMonth"></lightning-menu-item>
                        <lightning-menu-item label="This Quarter" value="ThisQuarter"></lightning-menu-item>
                        <lightning-menu-item label="This Year" value="ThisYear"></lightning-menu-item>
                        <lightning-menu-item>
                            <lightning-input type="date" label="Select Date"></lightning-input>
                        </lightning-menu-item>
                        </lightning-button-menu>
                    <span class="slds-text-body_regular slds-m-right_small custom-label" onclick={handleFilterClickTime}>Filter by Time Period</span> -->
                    

                </div>
            </div>
        </div>

        <template if:true={errorMessage}>
            <div class="slds-text-color_error slds-m-top_medium">
                {errorMessage}
            </div>
        </template>

        
        <c-l-w-c-custom-datatable-type
    key-field="Id"
    columns={columns}
    data={results}
    draft-values={draftValues}
    oncellchange={handleCellChange}
    onsave={handleSave}
    oncancel={handleCancel}
    onrowaction={handleRowAction}
    hide-checkbox-column="true">
</c-l-w-c-custom-datatable-type>


        <template if:true={isShowFlowModal}>
            <section role="dialog" tabindex="-1" aria-modal="true" aria-label="Meaningful description of the modal content" class="slds-modal slds-fade-in-open">
                <div class="slds-modal__container slds-modal_full custom-modal-full">
                    <div class="slds-modal__content slds-p-around_medium slds-modal__content_headless" id="modal-content-id-1">
                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse slds-float_right" title="Close" onclick={handleCloseModal}>
                            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                        </button>
                        <lightning-flow
                            flow-api-name={flowApiName}
                            flow-input-variables={flowInputVariables}
                            onstatuschange={handleFlowStatusChange}>
                        </lightning-flow>
                    </div>
                    <div class="slds-modal__footer">
                        <button class="slds-button slds-button_neutral" onclick={handleEditCustomer} aria-label="EditCustomer">Edit Customer</button>
                        <button class="slds-button slds-button_neutral" onclick={handleCloseModal} aria-label="Cancel and close">Cancel</button>
                        <button class="slds-button slds-button_brand">Save</button>
                    </div>
                </div>
            </section>
        </template>

        <!-- Pagination Section -->
        <!-- <div class="slds-grid slds-grid_align-spread slds-m-top_medium">
            <div class="slds-grid slds-grid_align-start slds-m-top_medium pagination-controls">
                <div class="pagination-info slds-p-around_small">
                    <span>{startRecord} - {endRecord} of {totalRecords} | Page {currentPage} of {totalPages}</span>
                </div>
                <lightning-combobox
                    name="pageSize"
                    value={pageSize}
                    options={pageSizeOptions}
                    onchange={handlePageSizeChange}
                    dropdown-alignment="bottom-left"
                    class="pagination-combobox"
                ></lightning-combobox>

                <lightning-input
                    type="number"
                    value={pageJumpValue}
                    onchange={handlePageJumpInput}
                    class="page-jump-input"
                    placeholder=" Enter the page number"
                ></lightning-input>
                <lightning-button
                    label="Go To"
                    onclick={handleGoToPage}
                    class="go-to-button"
                    variant="brand"
                ></lightning-button>
            </div>
            <div class="slds-grid slds-grid_align-end slds-m-top_medium">
                <div class="slds-col slds-size_auto slds-p-around_small">
                    <lightning-button
                        label="Prev"
                        onclick={handlePreviousPage}
                        disabled={isPreviousDisabled}
                        class="slds-m-right_small"
                    ></lightning-button>
                    <lightning-button
                        label="Next"
                        onclick={handleNextPage}
                        disabled={isNextDisabled}
                        variant="brand"
                    ></lightning-button>
                </div>
            </div>
        </div> -->
        <c-pagination
        page-size={pageSize} 
        totalrecords={totalRecords} 
        onpagination={handlePagination}>
    </c-pagination>
    </div>
    </lightning-card>
    </div>
</template>