<template>
    <lightning-card>
            <div class="SE-content">
                <div class="SE-Card secondDivForSearching">
                    <div class="slds-grid slds-grid_align-end slds-m-bottom_medium">
                        <div class="buttoncontainerfilter">
                            <div class="left-button slds-p-left_small">
                                <span class="slds-text-title_bold slds-m-right_x-small search-css">Search Results</span>
                                <lightning-badge label={recordsFound}
                                    class="slds-badge_inverse result-no-css"></lightning-badge>
                            </div>
                            <div class="right-buttons">
                                <lightning-badge data-id="today" label="Today" class={badgeClassCurrentDay}
                                        onclick={handleBadgeClick}>
                                    </lightning-badge>
                                    <lightning-badge data-id="this-week" label="This Week" class={badgeClassThisWeek}
                                        onclick={handleBadgeClick}>
                                    </lightning-badge>
                                    <lightning-badge data-id="this-month" label="This Month" class={badgeClassThisMonth}
                                        onclick={handleBadgeClick}>
                                    </lightning-badge>
                                    <lightning-badge data-id="this-quarter" label="This Quarter"
                                        class={badgeClassThisQuarter} onclick={handleBadgeClick}>
                                    </lightning-badge>
                                    <lightning-badge data-id="this-year" label="This Year" class={badgeClassThisYear}
                                        onclick={handleBadgeClick}>
                                    </lightning-badge>
                                <div class="export-button" title="Export to Excel" onclick={handleExportResultButtonClick}>
                                    <lightning-icon icon-name="doctype:excel" size="xx-small" alternative-text="Excel Icon"></lightning-icon>
                                    <span>Export to Excel</span>
                                </div>
                                <lightning-button icon-name="utility:download" variant="brand" label="Download PDF"
                                    onclick={handleDownloadPdf} class="customButton slds-m-left_small">
                                </lightning-button>
                            </div>
                        </div>
                    </div>
                
                    <template if:true={isrecordFound}>
                        <div class="slds-scrollable_x custom-table-wrapper">
                            <table class="slds-table slds-table_cell-buffer slds-table_bordered custom-table">
                                <thead>
                                    <tr class="custom-header">
                                        <th scope="col" data-field="Customer__c" class={sortedClassWorkOrderID} onclick={handleSort}>
                                            <div class="slds-truncate">
                                                Customer Id
                                                <lightning-icon icon-name={sortIcons.Customer__c}   class="sort-icon"
                                        size="x-small"></lightning-icon>
                                            </div>
                                        </th>
                                        <th scope="col" data-field="Name" class={sortedClassTransactionType} onclick={handleSort}>
                                            <div class="slds-truncate">
                                                Name
                                                <lightning-icon icon-name={sortIcons.Name}   class="sort-icon"
                                        size="x-small"></lightning-icon>
                                            </div>
                                        </th>
                                        <th scope="col" data-field="MailingAddress" class={sortedClassPaymentNumber} onclick={handleSort}>
                                            <div class="slds-truncate" >
                                                Address
                                                <lightning-icon icon-name={sortIcons.MailingAddress}   class="sort-icon"
                                        size="x-small"></lightning-icon>
                                            </div>
                                        </th>
                                        <th scope="col" data-field="SAP_Customer_Account_Balance__c" class={sortedClassCreatedBy} onclick={handleSort}>
                                            <div class="slds-truncate" >
                                                Amount
                                                <lightning-icon icon-name={sortIcons.SAP_Customer_Account_Balance__c}   class="sort-icon"
                                        size="x-small"></lightning-icon>
                                            </div>
                                        </th>
                                        <th scope="col" data-field="CreatedDate" class={sortedClassAmount} onclick={handleSort}>
                                            <div class="slds-truncate" >
                                                Handed Date
                                                <lightning-icon icon-name={sortIcons.CreatedDate}   class="sort-icon"
                                        size="x-small"></lightning-icon>
                                            </div>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <template if:false={isRecordsLoading}>
                                        <template for:each={creditBalanceReport} for:item="row">
                                            <tr key={row.Id} class={row.className}>
                                                <td>
                                                    <div class="slds-truncate" title={row.Customer__c}>{row.Customer__c}</div>
                                                </td>
                                                <td>
                                                    <div class="slds-truncate" title={row.Name}>{row.Name}</div>
                                                </td>
                                                <td>
                                                    <div class="slds-truncate" title={row.MailingAddress}>{row.MailingAddress}</div>
                                                </td>
                                                <td>
                                                    <div class="slds-truncate" title={row.SAP_Customer_Account_Balance__c}>{row.SAP_Customer_Account_Balance__c}</div>
                                                </td>
                                                <td>
                                                    <div class="slds-truncate" title={row.CreatedDate}>{row.CreatedDate}</div>
                                                </td>
                                            </tr>
                                        </template>

                                    </template>
                                    
                                </tbody>
                            </table>
                        </div>
                    </template>
                    <template if:true={isRecordsLoading}>
                        <div class="slds-text-align_center loader-row">
                            <lightning-spinner alternative-text="Loading records..." variant="brand" size="large"></lightning-spinner>
                        </div>
                    </template>

                    <template if:false={isrecordFound}>
                        <div class="no-result-found">
                            <h1 class="no-result-found-label">No Results Found</h1>
                        </div>
                    </template>

                    <div class="pagination-container">
                        <lightning-button class="pagination-button" label="<< Prev" onclick={handlePreviousPage}
                            disabled={isPreviousDisabled} variant="neutral">
                        </lightning-button>
    
                        <div class="page-info">
                            <span class="page-range">{startRecord}-{endRecord} of {recordsFound}</span>
                            <span class="page-text"> | Page {currentPage} of {totalPages}</span>
                        </div>
    
                        <lightning-button class="pagination-button" label="Next >>" onclick={handleNextPage}
                            disabled={isNextDisabled} variant="neutral">
                        </lightning-button>
                    </div>
                </div>
            </div>
    </lightning-card>
    <c-sap_-finsys-export-to-excel></c-sap_-finsys-export-to-excel>
    <c-sap_-finsys-reports-pdf-generator></c-sap_-finsys-reports-pdf-generator>
    
</template>